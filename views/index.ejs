<style>
    :root{
  --bg: #ffffff;
  --fg: #1f2937;
  --muted: #6b7280;
  --accent: #2563eb;
  --border: #d1d5db;
  --radius: 12px;
  --gap: 12px;
  --gap-lg: 16px;
  --maxw: 720px;
}

*{box-sizing:border-box;}
html,body{margin:0;padding:0;background:#f8fafc;color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;line-height:1.5;}
.upload-form{max-width:var(--maxw);margin:clamp(12px,4vw,40px) auto;padding:0 16px;}
.card{
  border:1px solid var(--border);
  background:var(--bg);
  border-radius:var(--radius);
  padding:clamp(12px,3vw,24px);
}

.legend{
  font-weight:600;
  font-size:clamp(16px,2.5vw,20px);
  margin-bottom:var(--gap-lg);
}

.file-row{
  display:flex;
  align-items:center;
  gap:var(--gap);
  flex-wrap:wrap;
  margin-bottom:var(--gap-lg);
}

/* Hide native file input but keep it accessible via label */
.visually-hidden{
  position:absolute !important;
  width:1px;height:1px;
  padding:0;margin:-1px;
  overflow:hidden;clip:rect(0 0 0 0);
  white-space:nowrap;border:0;
}

.btn{
  appearance:none;
  border:1px solid var(--border);
  background:#eef2ff;
  color:#111827;
  padding:10px 14px;
  border-radius:10px;
  cursor:pointer;
  font-weight:600;
}
.btn.primary{background:#e0e7ff;}
.btn.submit{background:#dcfce7;}
.btn:focus-visible,
#dropzone:focus-visible{
  outline:3px solid var(--accent);
  outline-offset:2px;
}

.file-name{
  min-width:160px;
  color:var(--muted);
  font-size:0.95rem;
}

/* Dropzone */
.dropzone{
  border:2px dashed var(--border);
  border-radius:10px;
  padding:clamp(16px,4vw,28px);
  background:#f9fafb;
  transition:background-color 160ms ease, border-color 160ms ease;
}
.dropzone.dragging-over{
  border-color:var(--accent);
  background:#eff6ff;
}

.dz-text{
  margin:0;
  color:#374151;
  text-align:center;
  font-size:clamp(14px,2.2vw,16px);
}

/* Responsive layout tweaks */
@media (max-width: 520px){
  .file-row{flex-direction:column; align-items:stretch;}
  .btn{width:100%; text-align:center;}
  .file-name{text-align:center;}
}

</style>
<form action="/upload" method="post" enctype="multipart/form-data" class="upload-form" novalidate>
  <fieldset class="card">
    <legend class="legend">Upload a file</legend>

    <div class="file-row">
      <input type="file" name="file" id="file" required class="visually-hidden" />
      <label for="file" class="btn primary">Choose file</label>
      <span id="fileName" class="file-name" aria-live="polite">No file selected</span>
    </div>

    <div id="dropzone" class="dropzone" aria-label="Drag and drop file here">
      <p class="dz-text">Drag & drop a file here, or use the Choose file button</p>
    </div>

    <button type="submit" class="btn submit">Upload File</button>
  </fieldset>
</form>

<script>
  (function(){
    const fileInput = document.getElementById('file');
    const fileNameEl = document.getElementById('fileName');
    const dropzone = document.getElementById('dropzone');

    // Reflect selected file name
    fileInput.addEventListener('change', () => {
      const name = fileInput.files && fileInput.files.length ? fileInput.files.name : 'No file selected';
      fileNameEl.textContent = name;
    });

    // Drag-and-drop (progressive enhancement)
    ['dragenter','dragover'].forEach(evt =>
      dropzone.addEventListener(evt, e => {
        e.preventDefault();
        e.dataTransfer.dropEffect = 'copy';
        dropzone.classList.add('dragging-over');
      })
    );
    ['dragleave','drop'].forEach(evt =>
      dropzone.addEventListener(evt, e => {
        e.preventDefault();
        dropzone.classList.remove('dragging-over');
      })
    );
    dropzone.addEventListener('drop', e => {
      const files = e.dataTransfer.files;
      if (!files || !files.length) return;
      fileInput.files = files; // attach to real input
      fileNameEl.textContent = files.name;
    });

    // Keyboard accessibility for dropzone
    dropzone.tabIndex = 0;
    dropzone.addEventListener('keydown', e => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        document.querySelector('label[for="file"]').click();
      }
    });
  })();
</script>
